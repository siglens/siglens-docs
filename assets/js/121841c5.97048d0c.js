"use strict";(self.webpackChunksiglens_docs=self.webpackChunksiglens_docs||[]).push([[5952],{9228:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});var s=l(5893),t=l(1151);const i={},a="Fluentd",r={id:"migration/elasticsearch/fluentd",title:"Fluentd",description:"Migrating from Elastic Search to SigLens using Fluentd",source:"@site/docs/migration/elasticsearch/fluentd.md",sourceDirName:"migration/elasticsearch",slug:"/migration/elasticsearch/fluentd",permalink:"/siglens-docs/migration/elasticsearch/fluentd",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Logstash",permalink:"/siglens-docs/migration/elasticsearch/logstash"},next:{title:"Migrating from Loki",permalink:"/siglens-docs/category/migrating-from-loki"}},c={},d=[{value:"1. Install Fluentd",id:"1-install-fluentd",level:2},{value:"Setup for Elasticsearch version 7.9.3",id:"setup-for-elasticsearch-version-793",level:3},{value:"2. Configure Fluentd",id:"2-configure-fluentd",level:2},{value:"Sample Configuration file",id:"sample-configuration-file",level:3},{value:"3. Run Fluentd",id:"3-run-fluentd",level:2}];function o(n){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"fluentd",children:"Fluentd"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.em,{children:"Migrating from Elastic Search to SigLens using Fluentd"})}),"\n",(0,s.jsx)(e.h2,{id:"1-install-fluentd",children:"1. Install Fluentd"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["Follow the instructions to install the Fluentd package from the ",(0,s.jsx)(e.a,{href:"https://docs.fluentd.org/installation",children:"official docs"}),"."]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://docs.fluentd.org/installation/install-by-deb#installing-fluent-package",children:"Debian/Ubuntu"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://docs.fluentd.org/installation/obsolete-installation/treasure-agent-v4-installation/install-by-dmg-td-agent-v4",children:"macOS"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://docs.fluentd.org/installation/install-by-msi",children:"Windows"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"setup-for-elasticsearch-version-793",children:"Setup for Elasticsearch version 7.9.3"}),"\n",(0,s.jsxs)(e.p,{children:["Fluentd comes with various plugins, including an Elasticsearch plugin (",(0,s.jsx)(e.code,{children:"fluent-plugin-elasticsearch"}),"). Follow these steps to install the compatible version:"]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Uninstall the default Elasticsearch plugin:"})," Make sure you are either in the fluentd-command-prompt (on Windows) or the path variables are set up or in the fluentd directory."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"fluent-gem uninstall fluent-plugin-elasticsearch\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"For td-agent:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"td-agent-gem uninstall fluent-plugin-elasticsearch\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.ol,{start:"2",children:["\n",(0,s.jsx)(e.li,{children:"Install the compatible Elasticsearch plugin (version 4.3.3):"}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:" fluent-gem install fluent-plugin-elasticsearch -v 4.3.3\n"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:" sudo td-agent-gem install fluent-plugin-elasticsearch -v 4.3.3\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.ol,{start:"3",children:["\n",(0,s.jsx)(e.li,{children:"Verify the installation:"}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"fluent-gem list | grep fluent-plugin-elasticsearch\n"})}),"\n",(0,s.jsx)(e.p,{children:"For td-agent:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"td-agent-gem list | grep fluent-plugin-elasticsearch\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.ol,{start:"4",children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Install the compatible Elasticsearch gem (version 7.9): First, uninstall any installed elasticsearch gem."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"fluent-gem uninstall elasticsearch\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"For td-agent:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"td-agent-gem uninstall elasticsearch\n"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Then, install the elasticsearch gem version 7.9:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"fluent-gem install elasticsearch -v 7.9\n"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"For td-agent:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"td-agent-gem install elasticsearch -v 7.9\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.em,{children:"You might need to setup or install ruby modules or development toolkit. If required, it will be automatically prompted and installed."})}),"\n",(0,s.jsx)(e.h2,{id:"2-configure-fluentd",children:"2. Configure Fluentd"}),"\n",(0,s.jsx)(e.h3,{id:"sample-configuration-file",children:"Sample Configuration file"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-conf",children:"<source>\n  @type tail\n  path D:\\Siglens\\SplunkExport.json\n  pos_file D:\\Siglens\\fluentd_logs\\SplunkExport1.log.pos\n  tag my.logs\n  read_from_head true\n  <parse>\n    @type json\n  </parse>\n</source>\n\n<match my.logs>\n  @type elasticsearch\n  host http://localhost:8081/elastic\n  logstash_format true\n  include_tag_key true\n  tag_key @log_name\n  verify_es_version_at_startup false\n  default_elasticsearch_version 7.9\n  request_timeout 45s # defaults to 5s\n</match>\n"})}),"\n",(0,s.jsx)(e.h2,{id:"3-run-fluentd",children:"3. Run Fluentd"}),"\n",(0,s.jsxs)(e.p,{children:["Navigate to the Fluentd directory and run ",(0,s.jsx)(e.code,{children:"fluentd -c <<path-of-fluentd-config>>"}),". On Linux, prepend the command with ",(0,s.jsx)(e.code,{children:"sudo"}),". If using td-agent, replace ",(0,s.jsx)(e.code,{children:"fluentd"})," with ",(0,s.jsx)(e.code,{children:"td-agent"}),". On Windows, run the command as an Administrator."]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Linux"}),":","\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"sudo fluentd -c /home/fluentd_config.conf\n"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Windows"}),": Open the fluentd command prompt as an Administrator and run","\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"fluentd -c /home/fluentd_config.conf\n"})}),"\n"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,t.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(o,{...n})}):o(n)}},1151:(n,e,l)=>{l.d(e,{Z:()=>r,a:()=>a});var s=l(7294);const t={},i=s.createContext(t);function a(n){const e=s.useContext(i);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:a(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);