"use strict";(self.webpackChunksiglens_docs=self.webpackChunksiglens_docs||[]).push([[8989],{8292:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>o,contentTitle:()=>r,default:()=>c,frontMatter:()=>i,metadata:()=>d,toc:()=>u});var t=l(5893),s=l(1151);const i={},r="Fluentd",d={id:"migration/splunk/fluentd",title:"Fluentd",description:"Migrating from Splunk to Siglens using Fluentd",source:"@site/docs/migration/splunk/fluentd.md",sourceDirName:"migration/splunk",slug:"/migration/splunk/fluentd",permalink:"/siglens-docs/migration/splunk/fluentd",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Logstash",permalink:"/siglens-docs/migration/splunk/logstash"},next:{title:"Migrating from Elastic Search",permalink:"/siglens-docs/category/migrating-from-elastic-search"}},o={},u=[{value:"1. Install Fluentd",id:"1-install-fluentd",level:2},{value:"Setup for Splunk",id:"setup-for-splunk",level:3},{value:"2. Configure Fluentd",id:"2-configure-fluentd",level:2},{value:"Sample Configuration file",id:"sample-configuration-file",level:3},{value:"3. Run Fluentd",id:"3-run-fluentd",level:2}];function a(n){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h1,{id:"fluentd",children:"Fluentd"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.em,{children:"Migrating from Splunk to Siglens using Fluentd"})}),"\n",(0,t.jsx)(e.h2,{id:"1-install-fluentd",children:"1. Install Fluentd"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["Follow the instructions to install the Fluentd package from the ",(0,t.jsx)(e.a,{href:"https://docs.fluentd.org/installation",children:"official docs"}),"."]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://docs.fluentd.org/installation/install-by-deb#installing-fluent-package",children:"Debian/Ubuntu"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://docs.fluentd.org/installation/obsolete-installation/treasure-agent-v4-installation/install-by-dmg-td-agent-v4",children:"macOS"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://docs.fluentd.org/installation/install-by-msi",children:"Windows"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"setup-for-splunk",children:"Setup for Splunk"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Fluentd doesn't include a plugin for Splunk by default."}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["Install the ",(0,t.jsx)(e.a,{href:"https://github.com/splunk/fluent-plugin-splunk-hec",children:(0,t.jsx)(e.code,{children:"fluent-plugin-splunk-hec"})}),". You can read more about the Splunk Plugin ",(0,t.jsx)(e.a,{href:"https://docs.fluentd.org/v/0.12/output/splunk",children:"here"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"For fluentd:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"fluent-gem install fluent-plugin-splunk-hec\n"})}),"\n",(0,t.jsx)(e.p,{children:"Verify if installation was successful -"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"fluent-gem list | grep fluent-plugin-splunk-hec\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"For td-agent:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"sudo td-agent-gem install fluent-plugin-splunk-hec\n"})}),"\n",(0,t.jsx)(e.p,{children:"Verify if installation was successful -"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"td-agent-gem list | grep fluent-plugin-splunk-hec\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.em,{children:"You might need to setup or install ruby modules or development toolkit. If required, it will be automatically prompted and installed."})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"2-configure-fluentd",children:"2. Configure Fluentd"}),"\n",(0,t.jsx)(e.h3,{id:"sample-configuration-file",children:"Sample Configuration file"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-conf",children:"<source>\n  @type tail\n  path D:\\Siglens\\SplunkExport.json\n  pos_file D:\\Siglens\\fluentd_logs\\SplunkExport2.log.pos\n  tag my.logs\n  read_from_head true\n  <parse>\n    @type json\n  </parse>\n</source>\n\n<match my.logs>\n  @type splunk_hec\n  host hostname\n  hec_token A94A8FE5CCB19BA61C4C08\n  hec_host localhost\n  hec_port 8081\n  hec_endpoint /services/collector/event\n  protocol http\n  index fluentd-ind-0\n  # Buffer configuration\n  <buffer>\n    chunk_limit_records 1\n    flush_at_shutdown true\n  </buffer>\n</match>\n"})}),"\n",(0,t.jsx)(e.h2,{id:"3-run-fluentd",children:"3. Run Fluentd"}),"\n",(0,t.jsxs)(e.p,{children:["Navigate to the Fluentd directory and run ",(0,t.jsx)(e.code,{children:"fluentd -c <<path-of-fluentd-config>>"}),". On Linux, prepend the command with ",(0,t.jsx)(e.code,{children:"sudo"}),". If using td-agent, replace ",(0,t.jsx)(e.code,{children:"fluentd"})," with ",(0,t.jsx)(e.code,{children:"td-agent"}),". On Windows, run the command as an Administrator."]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Linux"}),":","\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"sudo fluentd -c /home/fluentd_config.conf\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Windows"}),": Open the fluentd command prompt as an Administrator and run","\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"fluentd -c /home/fluentd_config.conf\n"})}),"\n"]}),"\n"]})]})}function c(n={}){const{wrapper:e}={...(0,s.a)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(a,{...n})}):a(n)}},1151:(n,e,l)=>{l.d(e,{Z:()=>d,a:()=>r});var t=l(7294);const s={},i=t.createContext(s);function r(n){const e=t.useContext(i);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:r(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);