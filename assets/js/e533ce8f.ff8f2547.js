"use strict";(self.webpackChunksiglens_docs=self.webpackChunksiglens_docs||[]).push([[7449],{8132:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>a});var t=n(5893),r=n(1151);const i={},o="head command",l={id:"spl-docs/head-command",title:"head command",description:"Description",source:"@site/docs/spl-docs/head-command.md",sourceDirName:"spl-docs",slug:"/spl-docs/head-command",permalink:"/siglens-docs/spl-docs/head-command",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"gentimes command",permalink:"/siglens-docs/spl-docs/gentimes-command"},next:{title:"makemv",permalink:"/siglens-docs/spl-docs/makemv-command"}},d={},a=[{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Required Arguments",id:"required-arguments",level:3},{value:"Optional Arguments",id:"optional-arguments",level:3},{value:"&lt;N&gt;",id:"n",level:4},{value:"limit",id:"limit",level:4},{value:"&lt;eval-expression&gt;",id:"eval-expression",level:4},{value:"keeplast",id:"keeplast",level:4},{value:"null",id:"null",level:4},{value:"Example",id:"example",level:2},{value:"Use-Case Example",id:"use-case-example",level:2}];function c(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"head-command",children:"head command"}),"\n",(0,t.jsx)(s.h2,{id:"description",children:"Description"}),"\n",(0,t.jsx)(s.p,{children:"This command retrieves the initial N results as they appear in the search sequence. Two forms of constraints can be utilized: a fixed count of results or a conditional expression that continues to return results until the specified condition is no longer met."}),"\n",(0,t.jsx)(s.h2,{id:"syntax",children:"Syntax"}),"\n",(0,t.jsxs)(s.p,{children:["The required syntax is in ",(0,t.jsx)(s.strong,{children:"bold"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"head"}),(0,t.jsx)(s.br,{}),"\n","[<N> or (<eval-expression>)]",(0,t.jsx)(s.br,{}),"\n","[limit=<int>]",(0,t.jsx)(s.br,{}),"\n","[null=<bool>]",(0,t.jsx)(s.br,{}),"\n","[keeplast=<bool>]"]}),"\n",(0,t.jsx)(s.h3,{id:"required-arguments",children:"Required Arguments"}),"\n",(0,t.jsx)(s.p,{children:"None."}),"\n",(0,t.jsx)(s.h3,{id:"optional-arguments",children:"Optional Arguments"}),"\n",(0,t.jsx)(s.h4,{id:"n",children:"<N>"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Syntax:"})," ",(0,t.jsx)(s.code,{children:"<int>"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.strong,{children:"Description:"}),(0,t.jsx)(s.br,{}),"\n","The number of results to return.",(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.strong,{children:"Default:"})," 10"]}),"\n",(0,t.jsx)(s.h4,{id:"limit",children:"limit"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Syntax:"})," ",(0,t.jsx)(s.code,{children:"limit=<int>"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.strong,{children:"Description:"}),(0,t.jsx)(s.br,{}),"\n","An alternative method to specify the number of results to be returned.",(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.strong,{children:"Default:"})," 10"]}),"\n",(0,t.jsx)(s.h4,{id:"eval-expression",children:"<eval-expression>"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Syntax:"})," ",(0,t.jsx)(s.code,{children:"<boolean-expression>"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.strong,{children:"Description:"})," ",(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.code,{children:"<eval-expression>"})," is a boolean expression that evaluates to ",(0,t.jsx)(s.code,{children:"true"})," or ",(0,t.jsx)(s.code,{children:"false"}),".",(0,t.jsx)(s.br,{}),"\n","The search continues to yield results until the given expression is no longer ",(0,t.jsx)(s.code,{children:"true"})," or the specified ",(0,t.jsx)(s.code,{children:"limit"})," has been reached."]}),"\n",(0,t.jsx)(s.h4,{id:"keeplast",children:"keeplast"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Syntax:"})," ",(0,t.jsx)(s.code,{children:"keeplast=<bool>"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.strong,{children:"Description:"}),(0,t.jsx)(s.br,{}),"\n","This argument is a boolean value used to specify whether to keep the first event that evaluated to ",(0,t.jsx)(s.code,{children:"false"})," or ",(0,t.jsx)(s.code,{children:"NULL"}),".",(0,t.jsx)(s.br,{}),"\n","This argument can only be used with an ",(0,t.jsx)(s.code,{children:"<eval-expression>"}),".",(0,t.jsx)(s.br,{}),"\n","If ",(0,t.jsx)(s.code,{children:"keeplast"})," is ",(0,t.jsx)(s.code,{children:"true"}),", the first event that did not evaluate to ",(0,t.jsx)(s.code,{children:"true"})," will be present in the result set, and the search will stop after this event. If ",(0,t.jsx)(s.code,{children:"keeplast"})," is ",(0,t.jsx)(s.code,{children:"false"}),", this event will not be present in the final result set, and the search will stop.",(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.strong,{children:"Default:"})," ",(0,t.jsx)(s.code,{children:"false"})]}),"\n",(0,t.jsx)(s.h4,{id:"null",children:"null"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Syntax:"})," ",(0,t.jsx)(s.code,{children:"null=<bool>"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.strong,{children:"Description:"}),(0,t.jsx)(s.br,{}),"\n","This argument is a boolean value used to specify how the events that evaluated to ",(0,t.jsx)(s.code,{children:"NULL"})," should be controlled.",(0,t.jsx)(s.br,{}),"\n","This argument can only be used with an ",(0,t.jsx)(s.code,{children:"<eval-expression>"}),".",(0,t.jsx)(s.br,{}),"\n","If a field or a value in the expression is ",(0,t.jsx)(s.code,{children:"NULL"}),", the result of that expression is ",(0,t.jsx)(s.code,{children:"NULL"}),".",(0,t.jsx)(s.br,{}),"\n","When ",(0,t.jsx)(s.code,{children:"null"})," is set to ",(0,t.jsx)(s.code,{children:"true"}),", events causing the ",(0,t.jsx)(s.code,{children:"<eval-expression>"})," to return ",(0,t.jsx)(s.code,{children:"NULL"})," are still included in the output, and the command proceeds to evaluate subsequent events. Conversely, when ",(0,t.jsx)(s.code,{children:"null"})," is set to ",(0,t.jsx)(s.code,{children:"false"}),", any ",(0,t.jsx)(s.code,{children:"<eval-expression>"})," resulting in ",(0,t.jsx)(s.code,{children:"NULL"})," is considered as having returned ",(0,t.jsx)(s.code,{children:"false"}),", halting the head's event processing and discarding this output from the result. However, to keep this last output, one can specify ",(0,t.jsx)(s.code,{children:"keeplast"})," as ",(0,t.jsx)(s.code,{children:"true"}),".",(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.strong,{children:"Default:"})," ",(0,t.jsx)(s.code,{children:"false"})]}),"\n",(0,t.jsx)(s.h2,{id:"example",children:"Example"}),"\n",(0,t.jsx)(s.p,{children:"The following example demonstrates how to retrieve the 5 most recent events."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"... | head 5\n"})}),"\n",(0,t.jsxs)(s.p,{children:["The same can be accomplished using the ",(0,t.jsx)(s.code,{children:"limit"})," argument."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"... | head limit=5\n"})}),"\n",(0,t.jsxs)(s.p,{children:["This example demonstrates how to retrieve the most recent web requests that resulted in either a bad request or a server error. It includes requests with a response status that may not have been logged (marked as ",(0,t.jsx)(s.code,{children:"NULL"}),") and retains the last web request that did not result in either of these errors."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"... | head http_status = 400 OR http_status = 500 null=true keeplast=true\n"})}),"\n",(0,t.jsx)(s.h2,{id:"use-case-example",children:"Use-Case Example"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Identifying URLs with High Error Rates"})}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Problem:"})," The goal is to identify the top 10 URLs with the highest rates of bad requests or server errors. This analysis is crucial for pinpointing issues that could be affecting user experience or indicating server-side problems."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Solution:"})," A search command is used to fetch the top 10 URLs that have an error rate of at least 50%. If fewer than 10 URLs meet this criterion, the command includes the URL with the highest error rate below 50%."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"... | stats count(eval(http_status>=400)) as error_count, count as total_count by url \n    | eval error_rate = error_count / total_count \n    | sort -error_rate\n    | head limit=10 error_rate >= 0.5 keeplast=true\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Explanation:"})}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"stats count(eval(http_status>=400)) as error_count, count as total_count by url"})," performs two main functions:","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"count(eval(http_status>=400)) as error_count"}),": This part of the command filters and counts the number of requests for each URL where the HTTP status code is 400 or higher, indicating a bad request or server error. The result is stored in a new field named ",(0,t.jsx)(s.code,{children:"error_count"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"count as total_count"}),": This counts the total number of requests made to each URL, regardless of the HTTP status code, and stores the result in a field named ",(0,t.jsx)(s.code,{children:"total_count"}),". This allows for the calculation of the error rate by comparing the number of errors to the total number of requests for each URL."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"eval error_rate = error_count / total_count"})," computes the error rate for each URL."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"sort -error_rate"})," sorts the URLs in descending order based on their error rates."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"head limit=10 error_rate >= 0.5 keeplast=true"})," selects the top 10 URLs with an error rate of at least 50%. If fewer than 10 URLs meet this criterion, it includes the URL with the highest error rate below 50%, ensuring that the most critical cases are always highlighted."]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.a)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},1151:(e,s,n)=>{n.d(s,{Z:()=>l,a:()=>o});var t=n(7294);const r={},i=t.createContext(r);function o(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);