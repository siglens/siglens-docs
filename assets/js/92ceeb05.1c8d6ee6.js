"use strict";(self.webpackChunksiglens_docs=self.webpackChunksiglens_docs||[]).push([[6576],{7592:(s,n,e)=>{e.r(n),e.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>r});var o=e(5893),t=e(1151);const i={},a="Logstash",l={id:"log-ingestion/logstash",title:"Logstash",description:"Ingesting logs into Siglens using Logstash",source:"@site/docs/log-ingestion/logstash.md",sourceDirName:"log-ingestion",slug:"/log-ingestion/logstash",permalink:"/siglens-docs/log-ingestion/logstash",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Vector",permalink:"/siglens-docs/log-ingestion/vector"},next:{title:"Fluentd",permalink:"/siglens-docs/log-ingestion/fluentd"}},d={},r=[{value:"1. Install Logstash",id:"1-install-logstash",level:2},{value:"Linux based Systems",id:"linux-based-systems",level:3},{value:"Windows",id:"windows",level:3},{value:"JVM Options",id:"jvm-options",level:3},{value:"Append at the end of Logstash/config/jvm.options",id:"append-at-the-end-of-logstashconfigjvmoptions",level:4},{value:"2. Configure Logstash",id:"2-configure-logstash",level:2},{value:"Sample Configuration file",id:"sample-configuration-file",level:3},{value:"3. Run Logstash",id:"3-run-logstash",level:2},{value:"Linux based systems",id:"linux-based-systems-1",level:3},{value:"Windows",id:"windows-1",level:3}];function h(s){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...s.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"logstash",children:"Logstash"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.em,{children:"Ingesting logs into Siglens using Logstash"})}),"\n",(0,o.jsx)(n.p,{children:'Logstash is an open-source data processing pipeline that ingests data from a multitude of sources simultaneously, transforms it, and then sends it to your favorite "stash".'}),"\n",(0,o.jsx)(n.p,{children:"In this guide, we will walk through the process of using Logstash to send logs to Siglens."}),"\n",(0,o.jsx)(n.h2,{id:"1-install-logstash",children:"1. Install Logstash"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Download Logstash-OSS version from ",(0,o.jsx)(n.a,{href:"https://www.elastic.co/downloads/logstash-oss",children:"here"})," and install using the procedure below"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"linux-based-systems",children:"Linux based Systems"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo dpkg -i logstash-oss-7.9.3-amd64.deb\n# OR\ntar xzvf logstash-oss-7.9.3-linux-x86_64.tar.gz\n"})}),"\n",(0,o.jsx)(n.h3,{id:"windows",children:"Windows"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:'Download the Zip version of Logstash, extract its contents into the C drive, rename the directory to "Logstash", then open a PowerShell prompt as an Administrator and run the below commands to install Logstash as a Windows service'}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"PS > cd 'C:\\Logstash'\nPS C:\\Logstash> bin/logstash --version\n"})}),"\n",(0,o.jsx)(n.h3,{id:"jvm-options",children:"JVM Options"}),"\n",(0,o.jsx)(n.h4,{id:"append-at-the-end-of-logstashconfigjvmoptions",children:"Append at the end of Logstash/config/jvm.options"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-options",children:"--add-opens java.base/sun.nio.ch=ALL-UNNAMED\n--add-opens java.base/java.io=ALL-UNNAMED\n\n--add-opens java.base/sun.nio.ch=ALL-UNNAMED\n--add-opens java.base/java.io=ALL-UNNAMED\n--add-opens java.base/java.security=ALL-UNNAMED\n"})}),"\n",(0,o.jsx)(n.h2,{id:"2-configure-logstash",children:"2. Configure Logstash"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Create a logstash config file with the below ",(0,o.jsx)(n.a,{href:"#sample-configuration-file",children:"sample configuration"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["If you are looking for a sample log dataset you can download it from ",(0,o.jsx)(n.a,{href:"https://github.com/siglens/pub-datasets/releases/download/v1.0.0/2kevents.json.tar.gz",children:"here"})," and untar it."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"sample-configuration-file",children:"Sample Configuration file"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-conf",children:'input {\n  file {\n    path => "D:/Siglens/2kevents.json"\n    start_position => "beginning"\n  }\n}\n\nfilter {\n  json {\n    source => "message"\n    remove_field => ["message", "file", "source_type", "path"]\n  }\n  mutate {\n    add_field => { "index" => "logstash_http" }\n  }\n  if ![first_name] {\n    drop { }\n  }\n}\n\noutput {\n  http {\n    format => "json"\n    content_type => "application/json"\n    http_method => "post"\n    url => "http://localhost:8081/splunk/services/collector/event"\n    headers => [\'Authorization\', \'A94A8FE5CCB19BA61C4C08\']\n  }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"3-run-logstash",children:"3. Run Logstash"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Run ",(0,o.jsx)(n.code,{children:"bin/logstash -f <<path-of-logstash-config>>"})," in the logstash directory (prepend with sudo on Linux, or run as Administrator on Windows)."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.h3,{id:"linux-based-systems-1",children:"Linux based systems"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Assuming the config is in the Logstash directory\nsudo bin/logstash -f ./logstash_config.conf\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.h3,{id:"windows-1",children:"Windows"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Assuming the config is in the Logstash directory\nbin/logstash -f ./logstash_config.conf\n"})}),"\n"]}),"\n"]})]})}function c(s={}){const{wrapper:n}={...(0,t.a)(),...s.components};return n?(0,o.jsx)(n,{...s,children:(0,o.jsx)(h,{...s})}):h(s)}},1151:(s,n,e)=>{e.d(n,{Z:()=>l,a:()=>a});var o=e(7294);const t={},i=o.createContext(t);function a(s){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof s?s(n):{...n,...s}}),[n,s])}function l(s){let n;return n=s.disableParentContext?"function"==typeof s.components?s.components(t):s.components||t:a(s.components),o.createElement(i.Provider,{value:n},s.children)}}}]);