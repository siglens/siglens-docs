"use strict";(self.webpackChunksiglens_docs=self.webpackChunksiglens_docs||[]).push([[9152],{5374:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>d});var l=n(5893),a=n(1151);const i={},c="Elasticsearch APIs",t={id:"elasticsearch-apis",title:"Elasticsearch APIs",description:"1. Ingest API:",source:"@site/docs/elasticsearch-apis.md",sourceDirName:".",slug:"/elasticsearch-apis",permalink:"/siglens-docs/elasticsearch-apis",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"SigLens as Prometheus Data Source in Grafana",permalink:"/siglens-docs/grafana-integrations/prometheus-data-source"},next:{title:"PromQL APIs",permalink:"/siglens-docs/promql-apis"}},r={},d=[];function o(e){const s={code:"code",h1:"h1",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.h1,{id:"elasticsearch-apis",children:"Elasticsearch APIs"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Ingest API"}),":\nIngest data in JSON format. Supports reading json data from file."]}),"\n",(0,l.jsx)(s.p,{children:"Example:"}),"\n",(0,l.jsx)(s.p,{children:"Using json file:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"curl -X POST http://localhost:8081/elastic/_bulk \\\n-H 'Content-Type: application/json' \\\n--data-binary \"@sampleEvents.json\" \n"})}),"\n",(0,l.jsx)(s.p,{children:"Using raw json:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:'curl -X POST "http://localhost:8081/elastic/_bulk" \\\n-H \'Content-Type: application/json\' \\\n-d \'{ "index" : { "_index" : "test" } }\n{ "name" : "john", "age":"23" }\'\n'})}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Get elasticsearch cluster information"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:'curl  http://localhost:8081/elastic/\ncurl -X GET "http://localhost:8081/elastic/"\ncurl -X GET "http://localhost:8081/elastic/_xpack"\n'})}),"\n",(0,l.jsx)(s.p,{children:"Example Output:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:'{"name":"local","cluster_name":"siglens","cluster_uuid":"398fb430-f809-4f4c-88a7-95a5a1c28738","version":{"number":"7.9.3","build_flavor":"oss","build_type":"tar","build_date":"2021-10-07T21:56:19.031608185Z","build_hash":"83c34f456ae29d60e94d886e455e6a3409bba9ed","build_snapshot":false,"lucene_version":"8.9.0","minimum_wire_compatibility_version":"6.8.0","minimum_index_compatibility_version":"6.0.0-beta1"}}\n'})}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"Create a new elasticsearch index"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"curl -X PUT http://localhost:8081/elastic/{indexName}\n"})}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"Query / search ingested data"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"GET /elastic/_search\nGET /elastic/{indexName}/_search\nPOST /elastic/_search\nPOST /elastic/{indexName}/_search\nPOST /elastic/{indexName}/_doc/_search\nGET /elastic/{indexName}/{docType}/_search\nPOST /elastic/{indexName}/{docType}/_search \n"})}),"\n",(0,l.jsx)(s.p,{children:"Examples:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:'curl -X GET http://localhost:5122/elastic/_search  \\\n    -d\'{"query": {"match_all": {}}, "size": 2}\'\n\ncurl -X GET http://localhost:5122/elastic/ind-0/_search  \\\n    -d\'{"query": {"match_all": {}}, "size": 2}\'\n\ncurl -X POST http://localhost:5122/elastic/_search  \\\n    -d\'{"query": {"match_all": {}}}\'\n\ncurl -X POST http://localhost:5122/elastic/ind-0/_search  \\\n    -d \'{"query":{"bool":{"must":{"term": {"weekday": "Saturday"}}}},"size": 1}\' \n\ncurl -X POST http://localhost:5122/elastic/ind-0/_doc/_search  \\\n    -d \'{"query":{"bool":{"must":{"term": {"weekday": "Saturday"}}}},"size": 1}\' \n'})}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"Delete index"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"curl -X DELETE http://localhost:5122/elastic/{indexName}\n"})}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"Create index alias"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"curl -X POST http://localhost:5122/elastic/_aliases \ncurl -X PUT http://localhost:5122/elastic/{indexName}/_alias/{aliasName}\ncurl -X POST http://localhost:5122/elastic/{indexName}/_alias/{aliasName}\n"})}),"\n",(0,l.jsx)(s.p,{children:"Example:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:'curl -X POST http://localhost:5122/elastic/_aliases \\\n-d\'{"actions" : [{ "add" : { "index" : "ind-0", "alias" : "alias1" } }]}\'\n\ncurl -X PUT http://localhost:5122/elastic/ind-0/_alias/ddd\n'})}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"Create multiple index aliases"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"curl -X PUT http://localhost:5122/elastic/{indexName}/_aliases/{aliasName}\ncurl -X POST http://localhost:5122/elastic/{indexName}/_aliases/{aliasName}\n"})}),"\n",(0,l.jsx)(s.p,{children:"Example:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"curl -X PUT http://localhost:5122/elastic/ind-0/_aliases/{ind-alias1,ind-alias2}\n"})}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"Get index alias"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"curl -X GET http://localhost:5122/elastic/_aliases\ncurl -X GET http://localhost:5122/elastic/_cat/aliases\ncurl -X GET http://localhost:5122/elastic/_alias/{aliasName}\n"})}),"\n",(0,l.jsx)(s.p,{children:"Example:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:'curl -X GET http://localhost:5122/elastic/_alias/ind-alias1\n\nOutput:\n{"ind-0":{"aliases":{"ddd":{},"alias1":{},"ind-alias1":{},"ind-alias2":{}}}}%\n'})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,a.a)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},1151:(e,s,n)=>{n.d(s,{Z:()=>t,a:()=>c});var l=n(7294);const a={},i=l.createContext(a);function c(e){const s=l.useContext(i);return l.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),l.createElement(i.Provider,{value:s},e.children)}}}]);